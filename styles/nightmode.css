#night-mode-clip {
  z-index: 9;
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  clip-path: circle(0% at var(--clip-x) var(--clip-y));
}

#night-mode-clip.anim {
  animation: circle-reveal 0.8s ease-out forwards;
}

@keyframes circle-reveal {
  0% {
    clip-path: circle(0% at var(--clip-x) var(--clip-y));
  }
  100% {
    clip-path: circle(150vmax at var(--clip-x) var(--clip-y));
  }
}

#night-mode-clip.to-dark .night-mode-content {
  background: black !important;
}

#night-mode-clip.to-dark .night-mode-content .page-wrapper canvas {
  filter: invert(1) hue-rotate(75deg) brightness(1.2) contrast(0.9);
}

#night-mode-clip.to-dark .night-mode-content .page-wrapper {
  box-shadow: 0px 0px 15px 4px rgba(255, 255, 255, 0.15);
}

#night-mode-clip.to-dark .night-mode-content .page-num {
  color: #888;
}

#night-mode-clip.to-light > * {
  background: linear-gradient(
    210deg,
    rgba(210, 210, 210, 1) 13%,
    rgba(179, 179, 179, 1) 48%,
    rgba(150, 150, 150, 1) 90%
  ) !important;
}

#night-mode-clip.to-light .page-wrapper canvas {
  filter: none;
}

#night-mode-clip.to-light .page-wrapper {
  box-shadow: 0px 4px 20px 5px rgba(0, 0, 0, 0.25);
}

#night-mode-clip.to-light .page-num {
  color: white;
}

/******************/
/* viewer styles */
body.night-mode {
  background: black;
}

/* invert color */
body.night-mode .page-wrapper canvas {
  filter: invert(1) hue-rotate(75deg) brightness(1.1) contrast(0.9);
}

body.night-mode .page-wrapper {
  box-shadow: 0px 0px 20px 4px rgba(255, 255, 255, 0.1);
}

body.night-mode .page-num {
  color: #888;
}

/*******************/
/* citation popup */
body.night-mode .citation-popup {
  background: rgba(30, 30, 30, 0.9);
  color: #ddd;
  box-shadow:
    0 10px 45px 0px rgba(255, 255, 255, 0.15),
    0 0 0 1px rgba(0, 0, 0, 0.5),
    inset 0 5px 20px rgba(0, 0, 0, 0.5);
}

body.night-mode .citation-popup-toggle {
  background: #333;
  border-color: #444;
  color: #aaa;
}

body.night-mode .citation-popup-toggle:hover {
  background: #444;
  color: #ddd;
}

/*******************/
/* panel controls */
.night-mode .pane-controls {
  background: rgba(40, 40, 40, 0.85);
  box-shadow:
    0 2px 12px rgba(0, 0, 0, 0.3),
    0 0 0 1px rgba(255, 255, 255, 0.1);
}

.night-mode .pane-controls:hover {
  background: rgba(50, 50, 50, 0.95);
}

.night-mode .pane-controls-inner {
  color: #e0e0e0;
}

.night-mode .pane-btn {
  color: #aaa;
}

.night-mode .pane-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
}

/******************/
/* floating ball */
.floating-ball.night-mode {
  background: linear-gradient(
    143.5deg,
    rgba(150, 150, 150, 0.8) 17.38%,
    rgba(190, 190, 190, 0.8) 62.76%,
    rgba(250, 250, 250, 0.8) 91.49%
  );
  box-shadow:
    inset -2px -2px 1px 0 #00000080,
    inset 1px 1px 1px 1px #00000080,
    0 6px 6px #ffffff10,
    0 0 20px #ffffff05;
}

.floating-ball.night-mode:hover {
  box-shadow:
    inset -5px -2px 2px 0 #00000080,
    inset 1px 1px 1px 1px #00000080,
    0 0 10px 2px #ffffff20,
    0 0 20px 10px #ffffff10;
}

.page-display.night-mode {
  filter: invert(1);
}

.tool-btn.night-mode {
  background: linear-gradient(
    143.5deg,
    rgba(150, 150, 150, 0.8) 17.38%,
    rgba(190, 190, 190, 0.8) 62.76%,
    rgba(250, 250, 250, 0.8) 91.49%
  );
  box-shadow:
    inset -2px -2px 1px 0 #00000080,
    inset 1px 1px 1px 1px #00000080,
    0 3px 5px 2px #ffffff10,
    0 0 10px 2px #ffffff05;
}

.inner.night-mode {
  filter: invert(1);
}

/******************/
/* navigation tree */
body.night-mode .nav-tree {
  background: rgba(15, 15, 18, 0.8);
  border-color: rgba(255, 240, 150, 0.1);
}

body.night-mode .nav-branch {
  background: linear-gradient(
    to left,
    rgba(255, 220, 180, 0.6),
    rgba(255, 220, 180, 0.2)
  );
}

body.night-mode .nav-item-row:hover {
  background: rgba(255, 200, 150, 0.1);
}

body.night-mode .nav-toggle {
  color: rgba(255, 255, 255, 0.5);
}

body.night-mode .nav-item--section .nav-icon {
  color: rgba(255, 255, 255, 0.8);
}

body.night-mode .nav-item--figure .nav-icon {
  color: rgba(251, 159, 16, 0.8);
}

body.night-mode .nav-item--table .nav-icon {
  color: rgba(64, 185, 59, 0.8);
}

body.night-mode .nav-title {
  color: rgba(255, 240, 220, 0.9);
}

body.night-mode .nav-page {
  color: rgba(255, 220, 180, 0.5);
}
